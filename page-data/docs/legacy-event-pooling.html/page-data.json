{"componentChunkName":"component---src-templates-docs-js","path":"/docs/legacy-event-pooling.html","result":{"data":{"markdownRemark":{"html":"<blockquote>\n<p>Примечание</p>\n<p>Информация на этой странице актуальна для React версии 16 и ниже, а также для React Native.</p>\n<p>Веб-версия React 17 <strong>не</strong> использует пул событий.</p>\n<p><a href=\"/blog/2020/08/10/react-v17-rc.html#no-event-pooling\">Подробнее в посте блога</a> about this change in React 17.</p>\n</blockquote>\n<p>События <a href=\"/docs/events.html\"><code class=\"gatsby-code-text\">SyntheticEvent</code></a> содержатся в пуле. Это означает, что объект <code class=\"gatsby-code-text\">SyntheticEvent</code> будет повторно использован, а все его свойства будут очищены после вызова обработчика события.\nНапример, следующий код не сработает, как ожидается:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Ничего не произойдёт, потому что объект события используется повторно.</span>\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Слишком поздно!</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>Если нужно обратиться к свойствам объекта события после выполнения обработчика события, то необходимо вызвать <code class=\"gatsby-code-text\">e.persist()</code>:</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"gatsby-code-jsx\"><code class=\"gatsby-code-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">handleChange</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Останавливает React от сброса свойств объекта события:</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">persist</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>target<span class=\"token punctuation\">.</span>value<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// Сработает</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>","frontmatter":{"title":"Пул событий","next":null,"prev":null},"fields":{"path":"content\\docs\\legacy-event-pooling.md","slug":"docs/legacy-event-pooling.html"}}},"pageContext":{"slug":"docs/legacy-event-pooling.html"}},"staticQueryHashes":[]}